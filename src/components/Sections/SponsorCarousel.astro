---
/**
 * SponsorCarousel Component
 * Displays title sponsor prominently and scrolling carousel of other sponsors
 */
import { Image } from "astro:assets";

interface Sponsor {
  name: string;
  logo: ImageMetadata;
  url: string;
}

interface Props {
  titleSponsor?: Sponsor | null;
  sponsors: Sponsor[];
}

const { titleSponsor, sponsors } = Astro.props;
---

<section class="py-8 bg-gray-50 overflow-hidden">
  <div class="container">
    <!-- Title + Title Sponsor inline -->
    <div class="flex flex-col md:flex-row items-center justify-center gap-4 md:gap-8 mb-6">
      <div class="text-center md:text-left">
        <span class="text-primary-600 font-medium text-sm uppercase tracking-wider">Proudly Supported By</span>
        <h2 class="text-xl md:text-2xl font-bold">Our Sponsors</h2>
      </div>
      {titleSponsor && (
        <>
          <div class="hidden md:block w-px h-12 bg-gray-300"></div>
          <a
            href={titleSponsor.url}
            target="_blank"
            rel="noopener noreferrer"
            class="group flex items-center gap-3"
          >
            <span class="text-xs uppercase tracking-wider text-gray-500">Title Sponsor</span>
            <div class="bg-white rounded-lg px-4 py-2 border border-gray-200 group-hover:border-primary-300 transition-colors">
              <Image
                src={titleSponsor.logo}
                alt={titleSponsor.name}
                class="h-10 md:h-12 w-auto object-contain"
              />
            </div>
          </a>
        </>
      )}
    </div>

    <!-- Sponsor Carousel -->
    <div class="relative">
      <div class="sponsor-carousel flex items-center gap-8 md:gap-12">
        {[...sponsors, ...sponsors].map((sponsor) => (
          <a
            href={sponsor.url}
            target="_blank"
            rel="noopener noreferrer"
            class="flex-shrink-0 grayscale hover:grayscale-0 opacity-60 hover:opacity-100 transition-all duration-300"
          >
            <Image
              src={sponsor.logo}
              alt={sponsor.name}
              class="h-8 md:h-10 w-auto object-contain"
            />
          </a>
        ))}
      </div>
    </div>
  </div>
</section>

<style>
  .sponsor-carousel {
    animation: scroll 30s linear infinite;
    width: max-content;
  }
  .sponsor-carousel:hover {
    animation-play-state: paused;
  }
  @keyframes scroll {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); }
  }
  /* Mobile: faster than desktop */
  @media (max-width: 768px) {
    .sponsor-carousel {
      animation-duration: 20s;
    }
  }
</style>
