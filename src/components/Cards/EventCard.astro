---
/**
 * EventCard Component
 * Displays an event with image, date, type badge, and title
 * Used on homepage and events listing page
 */
import { Image } from "astro:assets";
import { formatDate } from "../../utils/dateUtils";
import { getEventTypeBadgeClassesDark } from "../../utils/eventTypeColors";

interface Props {
  title: string;
  slug: string;
  date: Date;
  eventType?: string;
  location?: string;
  image?: ImageMetadata | null;
  featured?: boolean;
  class?: string;
}

const {
  title,
  slug,
  date,
  eventType,
  location,
  image,
  featured = false,
  class: className = ""
} = Astro.props;
---

<a
  href={`/events/${slug}`}
  class:list={[
    "group relative overflow-hidden rounded-xl bg-gray-900",
    featured ? "md:row-span-2 aspect-[4/3] md:aspect-auto" : "aspect-[16/9]",
    className
  ]}
>
  {image ? (
    <Image
      src={image}
      alt={title}
      class="absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
      widths={featured ? [640, 800] : [400, 600]}
    />
  ) : (
    <div class="absolute inset-0 bg-gradient-to-br from-primary-600 to-primary-800"></div>
  )}

  <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent"></div>

  <div class="absolute bottom-0 left-0 right-0 p-5 md:p-6">
    <div class="flex items-center gap-2 mb-2">
      {eventType && (
        <span class={`px-2 py-0.5 backdrop-blur-sm rounded text-xs font-medium uppercase tracking-wider ${getEventTypeBadgeClassesDark(eventType)}`}>
          {eventType}
        </span>
      )}
      <span class="text-white/70 text-sm">{formatDate(date)}</span>
    </div>
    <h3 class:list={[
      "font-bold text-white group-hover:text-primary-300 transition-colors",
      featured ? "text-xl md:text-2xl" : "text-lg"
    ]}>
      {title}
    </h3>
    {featured && location && (
      <p class="text-white/70 text-sm mt-2 hidden md:block">{location}</p>
    )}
  </div>
</a>
